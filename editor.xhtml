<?xml version="1.0" encoding="UTF-8"?>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:ev="http://www.w3.org/2001/xml-events" xmlns:TEI="http://www.tei-c.org/ns/1.0" xmlns:bfc="http://betterform.sourceforge.net/xforms/controls" xmlns:xf="http://www.w3.org/2002/xforms" data-template="templates:surround" data-template-with="templates/page.html" data-template-at="content">
    <head>
        <title>LGPN</title><!--
        ~ Copyright (c) 2015. existsolutions - http://www.exsitsolutions.com
        -->
        <link href="resources/js/vendor/select2/select2.css" rel="stylesheet"/>
        <link rel="stylesheet" type="text/css" href="resources/css/style.css"/>
    </head>
    <body>
        <div class="hidden">
            <xf:model id="model-1">
                <xf:instance id="i-default">
                    <TEI xmlns="http://www.tei-c.org/ns/1.0">
                        <teiHeader>
                            <revisionDesc>
                                <listChange/>
                            </revisionDesc>
                        </teiHeader>
                        <text>
                            <body>
                                <entry xml:id="uuid-0001">
                                    <form type="lemma">
                                        <orth type="greek"/>
                                        <orth type="latin"/>
                                        <orth type="h-variant"/>
                                        <orth type="lgpn"/>
                                        <date notBefore="" notAfter=""/>
                                    </form>
                                    <gramGrp type="classification">
                                        <gram type="fictitious"/>
                                        <gram type="GPR"/>
                                        <gram type="sublemma" ana="monosemic"/>
                                        <usg type="lang" cert=""/>
                                    </gramGrp>
                                    <gramGrp cert="high" ana="" type="segmentation" subtype="">
                                        <m baseForm="" type="prefix" n="1" function="" ana="" subtype="" cert="" corresp=""/>
                                        <m baseForm="" type="radical" n="1" function="" ana="" subtype="" cert="" corresp=""/>
                                        <m baseForm="" type="radical" n="2" function="" ana="" subtype="" cert="" corresp=""/>
                                        <m baseForm="" type="suffix" subtype="flexional" n="1"/>
                                        <m baseForm="" type="suffix" n="2"/>
                                        <m baseForm="" type="suffix" n="3"/>
                                        <m baseForm="" type="suffix" n="4"/>
                                        <listBibl>
                                            <cit type="source">
                                                <quote/>
                                                <bibl>
                                                    <author/>
                                                </bibl>
                                                <ref target=""/>
                                                <span/>
                                            </cit>
                                            <cit type="auxiliary">
                                                <quote/>
                                                <bibl>
                                                    <author/>
                                                </bibl>
                                                <ref target=""/>
                                                <span/>
                                            </cit>
                                            <cit type="linguistic">
                                                <quote/>
                                                <bibl>
                                                    <author/>
                                                </bibl>
                                                <ref target=""/>
                                                <span/>
                                            </cit>
                                            <cit type="modern">
                                                <quote/>
                                                <bibl>
                                                    <author/>
                                                </bibl>
                                                <ref target=""/>
                                                <span/>
                                            </cit>
                                        </listBibl>
                                    </gramGrp>
                                </entry>
                            </body>
                        </text>
                    </TEI>
                </xf:instance>
                <xf:bind nodeset="//TEI:orth[@type ='latin']" required="true()" type="xs:string"/>
                <xf:instance id="i-template">
                    <data xmlns="http://www.tei-c.org/ns/1.0">
                        <gramGrp cert="" ana="" type="segmentation" subtype="">
                            <m baseForm="" type="prefix" n="1" function="" ana="" subtype="" cert="" corresp=""/>
                            <m baseForm="" type="radical" n="1" function="" ana="" subtype="" cert="" corresp=""/>
                            <m baseForm="" type="radical" n="2" function="" ana="" subtype="" cert="" corresp=""/>
                            <m baseForm="" type="suffix" subtype="flexional" n="1"/>
                            <m baseForm="" type="suffix" n="2"/>
                            <m baseForm="" type="suffix" n="3"/>
                            <m baseForm="" type="suffix" n="4"/>
                            <listBibl>
                                <cit type="source">
                                    <quote/>
                                    <bibl>
                                        <author/>
                                    </bibl>
                                    <ref target=""/>
                                    <span/>
                                </cit>
                                <cit type="auxiliary">
                                    <quote/>
                                    <bibl>
                                        <author/>
                                    </bibl>
                                    <ref target=""/>
                                    <span/>
                                </cit>
                                <cit type="linguistic">
                                    <quote/>
                                    <bibl>
                                        <author/>
                                    </bibl>
                                    <ref target=""/>
                                    <span/>
                                </cit>
                                <cit type="modern">
                                    <quote/>
                                    <bibl>
                                        <author/>
                                    </bibl>
                                    <ref target=""/>
                                    <span/>
                                </cit>
                            </listBibl>
                        </gramGrp>
                        <usg type="lang" cert=""/>
                        <re>
                            <form>
                                <lbl>son</lbl>
                                <orth/>
                            </form>
                        </re>
                        <form type="variant">
                            <gen/>
                            <usg cert=""/>
                            <orth/>
                        </form>
                    </data>
                </xf:instance>
                <xf:instance id="i-controller">
                    <data xmlns="">
                        <morpheme/>
                    </data>
                </xf:instance><!-- PREFIXES -->
                <xf:instance xmlns="" id="i-dialects" src="../lgpn-ling-data/data/taxonomies/dialects.xml"/><!-- PREFIXES -->
                <xf:instance xmlns="" id="i-genders" src="../lgpn-ling-data/data/taxonomies/genders.xml"/><!-- PREFIXES -->
                <xf:instance xmlns="" id="i-prefix-1" src="resources/xml/prefixes/prefix-1.xml"/><!-- SUFFIXES -->
                <xf:instance xmlns="" id="i-suffix-1" src="resources/xml/suffixes/suffix-1.xml"/>
                <xf:instance xmlns="" id="i-suffix-2" src="resources/xml/suffixes/suffix-2.xml"/>
                <xf:instance xmlns="" id="i-suffix-3" src="resources/xml/suffixes/suffix-3.xml"/>
                <xf:instance xmlns="" id="i-suffix-4" src="resources/xml/suffixes/suffix-4.xml"/>
                <xf:instance xmlns="" id="i-classification" src="resources/xml/classification.xml"/>
                <xf:instance xmlns="" id="i-polysemic" src="resources/xml/polysemic.xml"/>
                <xf:instance xmlns="" id="i-sublemma" src="resources/xml/sublemma.xml"/>
                <xf:instance xmlns="" id="i-relations" src="resources/xml/relations.xml"/>
                <xf:instance xmlns="" id="i-prefix-headedness" src="resources/xml/prefix-headedness.xml"/>
                <xf:instance xmlns="" id="i-headedness" src="resources/xml/headedness.xml"/>
                <xf:instance xmlns="" id="i-functions" src="resources/xml/functions.xml"/>
                <xf:instance xmlns="" id="i-other" src="resources/xml/other.xml"/>
                <xf:instance xmlns="" id="i-name-characteristic" src="resources/xml/name-characteristic.xml"/>
                <xf:instance xmlns="" id="i-fictitious" src="resources/xml/fictitious.xml"/>
                <xf:instance xmlns="" id="i-gpr" src="resources/xml/gpr.xml"/>
                <xf:instance id="i-meanings">
                    <meanings xmlns="">
                        <being-reloaded grp="0" n=""/>
                        <target>
                            <TEI:taxonomy/>
                        </target>
                        <template>
                            <meaning grp="0" n="0"/>
                        </template><!-- and actual entries created dynamically e.g.:
                        <meaning grp="1" n="1">
                            <TEI:taxonomy/>
                        </meaning>
                        -->
                    </meanings>
                </xf:instance>
                <xf:submission id="s-load-data" method="get" replace="instance" ref="instance('i-default')" validate="false" resource="modules/load.xql?id={bf:appContext('id')}">
                    <xf:message ev:event="xforms-submit-done" level="ephemeral">Data have been loaded.</xf:message>
                    <xf:message ev:event="xforms-submit-error">Failed to load data.</xf:message>
                    <xf:action ev:event="xforms-submit-done">
                        <xf:action while="instance('i-meanings')/being-reloaded/@grp &lt; count(instance('i-default')//TEI:gramGrp[@type='segmentation'])">
                            <xf:setvalue ref="instance('i-meanings')/being-reloaded/@grp" value="instance('i-meanings')/being-reloaded/@grp + 1"/>
                            <xf:setvalue ref="instance('i-meanings')/being-reloaded/@n" value="1"/>
                            <xf:send submission="s-reload-meanings"/>
                            <xf:setvalue ref="instance('i-meanings')/being-reloaded/@n" value="2"/>
                            <xf:send submission="s-reload-meanings"/>
                        </xf:action>
                    </xf:action>
                </xf:submission>
                <xf:submission id="s-save-data" method="post" replace="none" validate="true" resource="modules/save.xql">
                    <xf:header>
                        <xf:name>userid</xf:name>
                        <xf:value>{bf:appContext('id')}</xf:value>
                    </xf:header>
                    <xf:header>
                        <xf:name>password</xf:name>
                        <xf:value/>
                    </xf:header>
                    <xf:action ev:event="xforms-submit">
                        <xf:setvalue ref="instance('i-default')//TEI:entry/@xml:id" value="instance('i-default')//TEI:orth[@type='latin']"/>
                        <xf:message ev:event="xforms-submit-done" level="ephemeral">Saving...</xf:message>
                    </xf:action>
                    <xf:message ev:event="xforms-submit-done" level="ephemeral">Data have been saved.</xf:message>
                    <xf:message ev:event="xforms-submit-error">Failed to save data</xf:message>
                </xf:submission>
                <xf:submission id="s-reload-meanings" method="post" replace="instance" validate="false" resource="modules/reload-meanings.xql" ref="instance('i-default')//TEI:entry/TEI:gramGrp[@type='segmentation'][instance('i-meanings')/being-reloaded/@grp/number()]/TEI:m[@type = 'radical' and @n = instance('i-meanings')/being-reloaded/@n]" targetref="instance('i-meanings')/target/TEI:taxonomy">
                    <xf:action ev:event="xforms-submit-done">
                        <xf:action if="not(instance('i-meanings')/meaning[@grp=instance('i-meanings')/being-reloaded/@grp and @n=instance('i-meanings')/being-reloaded/@n])">
                            <xf:insert context="instance('i-meanings')" nodeset="*[last()]" origin="instance('i-meanings')/template/meaning"/>
                            <xf:setvalue ref="instance('i-meanings')/meaning[@grp='0']/@n" value="instance('i-meanings')/being-reloaded/@n"/>
                            <xf:setvalue ref="instance('i-meanings')/meaning[@grp='0']/@grp" value="instance('i-meanings')/being-reloaded/@grp"/>
                        </xf:action>
                        <xf:delete context="instance('i-meanings')/meaning[@grp=instance('i-meanings')/being-reloaded/@grp and @n=instance('i-meanings')/being-reloaded/@n]" nodeset="*"/>
                        <xf:insert context="instance('i-meanings')/meaning[@grp=instance('i-meanings')/being-reloaded/@grp and @n=instance('i-meanings')/being-reloaded/@n]" origin="instance('i-meanings')/target/*"/>
                        <xf:delete context="instance('i-meanings')/target/TEI:taxonomy" nodeset="*|@*"/>
                    </xf:action>
                    <xf:message ev:event="xforms-submit-error" level="ephemeral">Meanings reload failed.</xf:message>
                </xf:submission>
                <xf:action ev:event="xforms-ready">
                    <xf:send submission="s-load-data" if="bf:appContext('id') != ''"/>
                    <script>
                        clearAndInitAutocompletes();    
                    </script>
                </xf:action>
            </xf:model>
            <xf:group>
                <xf:input ref="//TEI:usg" id="x-dialects">
                    <xf:label>Hidden Control</xf:label>
                    <xf:action ev:event="callback">
                        <xf:setvalue ref="." value="event('dialects')"/>
                    </xf:action>
                </xf:input>
            </xf:group>
            <xf:group id="load-subform-group">
                <xf:action ev:event="load-subform-event" if="string-length(instance('i-controller')/morpheme) &gt; 0">
                    <xf:load show="embed" targetid="mountpoint">
                        <xf:resource value="concat('meanings.xhtml?morpheme=', instance('i-controller')/morpheme,'#xforms')"/>
                        <xf:extension includeCSS="false" includeScript="false"/>
                    </xf:load>
                    <bfc:show dialog="meanings"/>
                </xf:action>
                <xf:action ev:event="load-subform-event" if="string-length(instance('i-controller')/morpheme) = 0">
                    <xf:load show="embed" targetid="mountpoint">
                        <xf:resource value="'meanings.xhtml#xforms'"/>
                        <xf:extension includeCSS="false" includeScript="false"/>
                    </xf:load>
                    <bfc:show dialog="meanings"/>
                </xf:action>
            </xf:group>
        </div>

        <header>
            <div class="tp-row">
                <h1 class="tp-column-fullwidth tp-headline">LGPN-Ling Editor</h1>
            </div>
        </header>

        <main>
            <!-- begin section general -->
            <section class="tp-section">
                <div class="tp-row">
                    <h2 class="tp-width-sidebar">General</h2>
                    <div class="tp-width-main">
                        <fieldset class="form-horizontal" id="general">
                            <div class="tp-form-group-col">
                                <label class="tp-label">Greek</label>
                                <xf:input class="tp-input -form-control" ref="//TEI:form[@type='lemma']/TEI:orth[@type='greek']">
                                    <xf:label class="input-group-addon">
                                        <i class="glyphicon">α</i>
                                    </xf:label>
                                    <xf:hint>Greek</xf:hint>
                                </xf:input>
                            </div>
                            <div class="tp-form-group-col">
                                <label class="tp-label">Latin</label>
                                <xf:input class="tp-input -form-control" ref="//TEI:form[@type='lemma']/TEI:orth[@type='latin']">
                                    <xf:label class="input-group-addon">
                                        <i class="glyphicon glyphicon-font"/>
                                    </xf:label>
                                    <xf:hint>Latin</xf:hint>
                                </xf:input>
                            </div>
                            <div class="tp-form-group-col">
                                <label class="tp-label">H-Variant</label>
                                <xf:input class="tp-input -form-control" ref="//TEI:form[@type='lemma']/TEI:orth[@type='h-variant']">
                                    <xf:label class="input-group-addon">
                                        <i class="glyphicon glyphicon-header"/>
                                    </xf:label>
                                    <xf:hint>Latin variant (with parentheses)</xf:hint>
                                </xf:input>
                            </div>
                            <div class="tp-form-group-col">
                                <label class="tp-label">LGPN</label>
                                <xf:input class="tp-input -form-control" ref="//TEI:form[@type='lemma']/TEI:orth[@type='lgpn']">
                                    <xf:label class="input-group-addon">
                                        <i class="glyphicon glyphicon-italic"/>
                                    </xf:label>
                                    <xf:hint>LGPN variant (if differs)</xf:hint>
                                </xf:input>
                            </div>
                            <div class="tp-form-group-col">
                                <label class="tp-label">Classification</label>
                                <xf:select class="tp-input" ref="//TEI:gramGrp[@type='classification']/TEI:gram[@type='fictitious']" appearance="full">
                                    <xf:label class="input-group-addon">
                                        <i class="glyphicon glyphicon-check"/>
                                    </xf:label>
                                    <xf:itemset nodeset="instance('i-fictitious')//option">
                                        <xf:label ref="."/>
                                        <xf:value ref="@value"/>
                                    </xf:itemset>
                                </xf:select>
                            </div>
                            <div class="tp-form-group-col">
                                <label class="tp-label">Classification</label>
                                <xf:select class="tp-input" ref="//TEI:gramGrp[@type='classification']/TEI:gram[@type='GPR']" appearance="full">
                                    <xf:label class="input-group-addon">
                                        <i class="glyphicon glyphicon-check"/>
                                    </xf:label>
                                    <xf:itemset nodeset="instance('i-gpr')//option">
                                        <xf:label ref="."/>
                                        <xf:value ref="@value"/>
                                    </xf:itemset>
                                </xf:select>
                            </div>
                        </fieldset>

                        <div class="tp-row">
                            <div class="tp-row tp-repeat-add">
                                <xf:label class="tp-form-header">
                                    <h3 class="tp-row tp-repeat-headline">Significant relative name</h3>
                                </xf:label>
                                <div class="tp-repeat-button-left">
                                    <div class="tp-button-row tp-add">
                                        <label>Add name</label>
                                        <xf:trigger class="-btn -btn-default">
                                            <xf:label class="input-group-addon">
                                                <i class="glyphicon glyphicon-plus"/>
                                            </xf:label>
                                            <xf:insert context="//TEI:entry" nodeset="TEI:re" origin="instance('i-template')//TEI:re"/>
                                            <script>
                                                clearAndInitAutocompletes();
                                            </script>
                                        </xf:trigger>
                                    </div>
                                </div>
                            </div>

                            <div class="tp-form-group-col">
                                <xf:select1 class="input-group -form-control" ref="//TEI:re//TEI:lbl">
                                    <xf:label class="input-group-addon">Relation</xf:label>
                                    <xf:itemset nodeset="instance('i-relations')//option">
                                        <xf:label ref="."/>
                                        <xf:value ref="@xml:id"/>
                                    </xf:itemset>
                                </xf:select1>
                            </div>

                            <div class="tp-form-group-col">
                                <xf:input class="input-group -form-control" ref="//TEI:re//TEI:orth">
                                    <xf:label class="input-group-addon">Name</xf:label>
                                    <xf:hint>Relative name</xf:hint>
                                </xf:input>
                            </div>

                            <div class="tp-row tp-repeat-buttons">
                                <div class="tp-repeat-button-right">
                                    <div class="tp-button-row tp-delete">
                                        <label>Delete name</label>
                                        <xf:trigger class="-btn -btn-default">
                                            <xf:label class="input-group-addon">
                                                <i class="glyphicon glyphicon-trash"/>
                                            </xf:label>
                                            <xf:delete nodeset="//TEI:entry//TEI:re//TEI:lbl"/>
                                            <xf:delete nodeset="//TEI:entry//TEI:re//TEI:orth"/>
                                        </xf:trigger>
                                    </div>
                                </div>
                            </div>

                            <div class="tp-row">
                                <div class="tp-form-group-col">
                                    <label class="tp-label">Sublemma</label>
                                    <xf:select1 class="tp-input -form-control" ref="//TEI:gramGrp[@type='classification']/TEI:gram[@type='sublemma']">
                                        <xf:label class="input-group-addon">
                                            <i class="glyphicon glyphicon-asterisk"/>
                                        </xf:label>
                                        <xf:itemset nodeset="instance('i-sublemma')//option">
                                            <xf:label ref="."/>
                                            <xf:value ref="@xml:id"/>
                                        </xf:itemset>
                                    </xf:select1>
                                </div>

                                <div class="tp-form-group-col">
                                    <label class="tp-label">Polysemic</label>
                                    <xf:select class="input-group" ref="//TEI:gramGrp[@type='classification']/TEI:gram[@ana]" appearance="full">
                                    <xf:label class="input-group-addon">
                                        <i class="glyphicon glyphicon-check"/>
                                    </xf:label>
                                        <xf:itemset nodeset="instance('i-polysemic')//option">
                                            <xf:label ref="."/>
                                            <xf:value ref="."/>
                                        </xf:itemset>
                                    </xf:select>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

            </section>
            <!-- // end section general -->

            <xf:group ref="//TEI:entry">
                <xf:group class="fieldset">
                    <div class="row">
                        <div class="col-xs-11">
                            <xf:label>
                                <h3>Dialects</h3>
                            </xf:label>
                        </div>
                        <div class="col-xs-1">
                            <xf:trigger class="-btn -btn-default -glyphicon -glyphicon-plus">
                                <xf:label/>
                                <xf:insert context="//TEI:gramGrp[@type='classification']" nodeset="TEI:usg" origin="instance('i-template')//TEI:usg[@type='lang']"/>
                            </xf:trigger>
                        </div>
                    </div>
                <xf:group ref="//TEI:gramGrp[@type='classification']">
                    <xf:repeat ref="TEI:usg[@type='lang']" id="r-dialect">
                        <xf:label/>
                        <xf:group ref=".">
                            <xf:label/>
                            <div class="row">
                                <div class="col-xs-3">
                                    <div class="input-group">
                                        <xf:select1 class="input-group -form-control" ref=".">
                                            <xf:label class="input-group-addon">Dialect</xf:label>
                                            <xf:itemset nodeset="instance('i-dialects')//TEI:category">
                                                <xf:label ref="TEI:catDesc[@xml:lang='en'][@ana='short']"/>
                                                <xf:value ref="@xml:id"/>
                                            </xf:itemset>
                                        </xf:select1>
                                    </div>
                                </div>
                                <div class="col-xs-1">
                                    <xf:select class="input-group -form-control" ref="@cert" appearance="full" incremental="true">
                                        <xf:item>
                                            <xf:label>?</xf:label>
                                            <xf:value>low</xf:value>
                                        </xf:item>
                                    </xf:select>
                                </div>
                                <div class="col-xs-1">
                                    <xf:trigger class="-btn -btn-default -glyphicon -glyphicon-trash">
                                        <xf:label/>
                                        <xf:delete nodeset="//TEI:usg[@type='lang'][index('r-dialect')]"/>
                                    </xf:trigger>
                                </div>
                            </div>
                        </xf:group>
                    </xf:repeat>
                </xf:group>
                </xf:group>
                <xf:group class="fieldset">
                    <div class="row">
                        <div class="col-xs-11">
                            <xf:label>
                                <h3>Name variants</h3>
                            </xf:label>
                        </div>
                        <div class="col-xs-1">
                            <xf:trigger class="-btn -btn-default -glyphicon -glyphicon-plus">
                                <xf:label/>
                                <xf:insert context="//TEI:entry" nodeset="TEI:form" origin="instance('i-template')//TEI:form[@type='variant']"/>
                            </xf:trigger>
                        </div>
                    </div>
                    <xf:repeat ref="TEI:form[@type='variant']" id="r-nameVariant">
                        <xf:label/>
                        <xf:group ref=".">
                            <xf:label/>
                            <div class="row">
                                <div class="col-xs-3">
                                    <xf:select1 class="input-group -form-control" ref="TEI:gen">
                                        <xf:label class="input-group-addon">Gender</xf:label>
                                        <xf:itemset nodeset="instance('i-genders')//TEI:category">
                                            <xf:label ref="TEI:catDesc[@xml:lang='en'][@ana='short']"/>
                                            <xf:value ref="@xml:id"/>
                                        </xf:itemset>
                                    </xf:select1>
                                </div>
                                <div class="col-xs-3">
                                    <xf:input class="input-group -form-control" ref="TEI:orth">
                                        <xf:label class="input-group-addon">form</xf:label>
                                    </xf:input>
                                </div>
                                <div class="col-xs-3">
                                <div class="input-group">
                                    <xf:select1 class="input-group -form-control" ref="TEI:usg">
                                        <xf:label class="input-group-addon">Dialect</xf:label>
                                        <xf:itemset nodeset="instance('i-dialects')//TEI:category">
                                            <xf:label ref="TEI:catDesc[@xml:lang='en'][@ana='short']"/>
                                            <xf:value ref="@xml:id"/>
                                        </xf:itemset>
                                    </xf:select1>
                                </div>
                                </div>
                                <div class="col-xs-1">
                                    <xf:select class="input-group -form-control" ref="TEI:usg/@cert" appearance="full" incremental="true">
                                        <xf:item>
                                            <xf:label>?</xf:label>
                                            <xf:value>low</xf:value>
                                        </xf:item>
                                    </xf:select>
                                </div>
                                <div class="col-xs-1">
                                    <xf:trigger class="-btn -btn-default -glyphicon -glyphicon-trash">
                                        <xf:label/>
                                        <xf:delete nodeset="//TEI:form[@type='variant'][index('r-nameVariant')]"/>
                                    </xf:trigger>
                                </div>
                            </div>
                        </xf:group>
                    </xf:repeat>
                </xf:group>
                <hr/>
                <xf:group class="fieldset">
                    <div class="row">
                        <div class="col-xs-11">
                            <xf:label>
                                <h3>Segmentation &amp; root interpretation</h3>
                            </xf:label>
                        </div>
                        <div class="col-xs-1">
                            <xf:trigger class="-btn -btn-default -glyphicon -glyphicon-plus">
                                <xf:label/>
                                <xf:insert context="//TEI:entry" nodeset="TEI:gramGrp" origin="instance('i-template')//TEI:gramGrp[@type='segmentation']"/>
                                <script>
                                    clearAndInitSemantics();  
                                </script>
                            </xf:trigger>
                        </div>
                    </div>
                    
                    <!-- SEGMENTATION -->
                    <xf:repeat ref="TEI:gramGrp[@type='segmentation']" id="r-gramGrp">
                        <xf:label/>
                        <xf:group ref=".">

                            <div class="row">
                                <div class="col-xs-3">
                                    <xf:input class="input-group -form-control" ref="@cert">
                                        <xf:label class="input-group-addon">certainty</xf:label>
                                    </xf:input>
                                </div>
                                <div class="col-xs-6">
                                    <div class="input-group">
                                        <xf:select1 class="input-group -form-control" ref="@subtype">
                                            <xf:label class="input-group-addon">Structuration &amp; Semantics of the Complex names</xf:label>
                                            <xf:itemset nodeset="instance('i-classification')//option">
                                                <xf:label ref="."/>
                                                <xf:value ref="@xml:id"/>
                                            </xf:itemset>
                                        </xf:select1>
                                    </div>
                                </div>
                                <div class="col-xs-3">
                                    <div class="input-group">
                                        <xf:select class="input-group -form-control" ref="@ana" appearance="full">
                                            <xf:label class="input-group-addon"/>
                                            <xf:itemset nodeset="instance('i-name-characteristic')//option">
                                                <xf:label ref="."/>
                                                <xf:value ref="."/>
                                            </xf:itemset>
                                        </xf:select>
                                    </div>
                                </div>
                            </div>
                            <hr/>
                            
                            <div class="row">
                                <div class="col-xs-3">
                                    <xf:input class="input-group -form-control" ref="TEI:m[@type = 'prefix' and @n = 1]">
                                        <xf:action ev:event="constituent_autocomplete-callback">
                                            <xf:setvalue ref="." value="event('termValue')"/>
                                        </xf:action>
                                        <xf:label class="input-group-addon">preconstituent 1</xf:label>
                                        <xf:alert>no whitespace allowed</xf:alert>
                                    </xf:input>
                                    <input type="hidden" data-function="constituent_autocomplete" placeholder="Type to search ..." autocomplete="off"/>
                                </div>
                                <div class="col-xs-3">
                                    <xf:input class="input-group -form-control" ref="TEI:m[@type = 'prefix' and @n = 1]/@baseForm">
                                        <xf:action ev:event="autocomplete-callback">
                                            <xf:setvalue ref="." value="event('termValue')"/>
                                        </xf:action>
                                        <xf:label class="input-group-addon">preroot</xf:label>
                                        <!--
                                        <xf:action ev:event="xforms-value-changed">
                                            <xf:setvalue ref="instance('i-meanings')/being-reloaded/@grp" value="count(context()/preceding::TEI:gramGrp[@type='segmentation'])+1"/>
                                            <xf:setvalue ref="instance('i-meanings')/being-reloaded/@n" value="1"/>
                                            <xf:send submission="s-reload-meanings"/>
                                        </xf:action>
                                        -->
                                    </xf:input>
                                    <input type="hidden" data-function="autocomplete" placeholder="Type to search ..." autocomplete="off"/>
                                    <xf:trigger class="-btn -btn-default -glyphicon -glyphicon-plus">
                                        <xf:label/>
                                        <xf:action ev:event="DOMActivate">
                                            <xf:setvalue ref="instance('i-controller')/morpheme" value="instance('i-default')//TEI:gramGrp[@type='segmentation'][index('r-gramGrp')]/TEI:m[@type = 'prefix' and @n = 1]/@baseForm"/>
                                            <xf:dispatch name="load-subform-event" targetid="load-subform-group"/>
                                        </xf:action>
                                    </xf:trigger>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-xs-6">
                                    <xf:select ref="TEI:m[@type = 'prefix' and @n = 1]/@function" appearance="full" incremental="true">
                                        <xf:label/>
                                        <xf:item>
                                            <xf:label>Verb</xf:label>
                                            <xf:value>V</xf:value>
                                        </xf:item>
                                        <xf:item>
                                            <xf:label>Participle</xf:label>
                                            <xf:value>Part</xf:value>
                                        </xf:item>
                                        <xf:item>
                                            <xf:label>Agt Noun</xf:label>
                                            <xf:value>AgtN</xf:value>
                                        </xf:item>
                                        <xf:item>
                                            <xf:label>Act Noun</xf:label>
                                            <xf:value>ActN</xf:value>
                                        </xf:item>
                                        <xf:item>
                                            <xf:label>Noun</xf:label>
                                            <xf:value>N</xf:value>
                                        </xf:item>
                                        <xf:item>
                                            <xf:label>Adj</xf:label>
                                            <xf:value>Adj</xf:value>
                                        </xf:item>
                                        <xf:item>
                                            <xf:label>Pronoun</xf:label>
                                            <xf:value>Pro</xf:value>
                                        </xf:item>
                                        <xf:item>
                                            <xf:label>Adv</xf:label>
                                            <xf:value>Adv</xf:value>
                                        </xf:item>
                                    </xf:select>
                                </div>
                                <div class="col-xs-6">
                                <!-- preroot meanings -->
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-xs-3">
                                    <div class="input-group">
                                        <xf:select class="input-group -form-control" ref="TEI:m[@type = 'prefix' and @n = 1]/@subtype" appearance="full">
                                            <xf:label class="input-group-addon">head.</xf:label>
                                            <xf:itemset nodeset="instance('i-headedness')//option">
                                                <xf:label ref="."/>
                                                <xf:value ref="@xml:id"/>
                                            </xf:itemset>
                                        </xf:select>
                                    </div>
                                </div>
                                <div class="col-xs-1">
                                    <xf:select class="input-group -form-control" ref="TEI:m[@type = 'prefix' and @n = 1]/@ana" appearance="full" incremental="true">
                                        <xf:item>
                                            <xf:label>Abbr</xf:label>
                                            <xf:value>AbbrC</xf:value>
                                        </xf:item>
                                    </xf:select>
                                </div>
                                <div class="col-xs-1">
                                    <xf:select class="input-group -form-control" ref="TEI:m[@type = 'prefix' and @n = 1]/@cert" appearance="full" incremental="true">
                                        <xf:item>
                                            <xf:label>*</xf:label>
                                            <xf:value>unattested</xf:value>
                                        </xf:item>
                                    </xf:select>
                                </div>
                                <div class="col-xs-2">
                                    <div class="input-group">
                                        <xf:input class="input-group -form-control" ref="TEI:m[@type = 'prefix' and @n = 1]/@corresp">
                                            <xf:label class="input-group-addon">
                                                <span class="glyphicon glyphicon-tag"/>
                                            </xf:label>
                                            <xf:hint>linked compound</xf:hint>
                                        </xf:input>
                                    </div>
                                </div>
                            </div>
                            <hr/>
                            <div class="row">
                                <div class="col-xs-3">
                                    <xf:input class="input-group -form-control" ref="TEI:m[@type = 'radical' and @n = 1]">
                                        <xf:action ev:event="constituent_autocomplete-callback">
                                            <xf:setvalue ref="." value="event('termValue')"/>
                                        </xf:action>
                                        <xf:label class="input-group-addon">constituent 1</xf:label>
                                        <xf:alert>no whitespace allowed</xf:alert>
                                    </xf:input>
                                    <input type="hidden" data-function="constituent_autocomplete" placeholder="Type to search ..." autocomplete="off"/>
                                </div>
                                <div class="col-xs-3">
                                    <xf:input class="input-group -form-control" ref="TEI:m[@type = 'radical' and @n = 1]/@baseForm">
                                        <xf:action ev:event="autocomplete-callback">
                                            <xf:setvalue ref="." value="event('termValue')"/>
                                        </xf:action>
                                        <xf:label class="input-group-addon">root</xf:label>
                                        <xf:action ev:event="xforms-value-changed">
                                            <xf:setvalue ref="instance('i-meanings')/being-reloaded/@grp" value="count(context()/preceding::TEI:gramGrp[@type='segmentation'])+1"/>
                                            <xf:setvalue ref="instance('i-meanings')/being-reloaded/@n" value="1"/>
                                            <xf:send submission="s-reload-meanings"/>
                                        </xf:action>
                                    </xf:input>
                                    <input type="hidden" data-function="autocomplete" placeholder="Type to search ..." autocomplete="off"/>
                                    <xf:trigger class="-btn -btn-default -glyphicon -glyphicon-plus">
                                        <xf:label/>
                                        <xf:action ev:event="DOMActivate">
                                            <xf:setvalue ref="instance('i-controller')/morpheme" value="instance('i-default')//TEI:gramGrp[@type='segmentation'][index('r-gramGrp')]/TEI:m[@type = 'radical' and @n = 1]/@baseForm"/>
                                            <xf:dispatch name="load-subform-event" targetid="load-subform-group"/>
                                        </xf:action>
                                    </xf:trigger>
                                </div>
                                <div class="col-xs-3">
                                    <xf:input class="input-group -form-control" ref="TEI:m[@type = 'radical' and @n = 2]">
                                        <xf:action ev:event="constituent_autocomplete-callback">
                                            <xf:setvalue ref="." value="event('termValue')"/>
                                        </xf:action>
                                        <xf:label class="input-group-addon">constituent 2</xf:label>
                                        <xf:alert>no whitespace allowed</xf:alert>
                                    </xf:input>
                                    <input type="hidden" data-function="constituent_autocomplete" placeholder="Type to search ..." autocomplete="off"/>
                                </div>
                                <div class="col-xs-3">
                                    <xf:input class="input-group -form-control" ref="TEI:m[@type = 'radical' and @n = 2]/@baseForm">
                                        <xf:action ev:event="autocomplete-callback">
                                            <xf:setvalue ref="." value="event('termValue')"/>
                                        </xf:action>
                                        <xf:label class="input-group-addon">root</xf:label>
                                        <xf:action ev:event="xforms-value-changed">
                                            <xf:setvalue ref="instance('i-meanings')/being-reloaded/@grp" value="count(context()/preceding::TEI:gramGrp[@type='segmentation'])+1"/>
                                            <xf:setvalue ref="instance('i-meanings')/being-reloaded/@n" value="2"/>
                                            <xf:send submission="s-reload-meanings"/>
                                        </xf:action>
                                    </xf:input>
                                    <input type="hidden" data-function="autocomplete" placeholder="Type to search ..." autocomplete="off"/>
                                    <xf:trigger class="-btn -btn-default -glyphicon -glyphicon-plus">
                                        <xf:label/>
                                        <xf:action ev:event="DOMActivate">
                                            <xf:setvalue ref="instance('i-controller')/morpheme" value="instance('i-default')//TEI:gramGrp[@type='segmentation'][index('r-gramGrp')]/TEI:m[@type = 'radical' and @n = 2]/@baseForm"/>
                                            <xf:dispatch name="load-subform-event" targetid="load-subform-group"/>
                                        </xf:action>
                                    </xf:trigger>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-xs-6">
                                    <xf:select ref="TEI:m[@type = 'radical' and @n = 1]/@function" appearance="full" incremental="true">
                                        <xf:label/>
                                        <xf:item>
                                            <xf:label>Verb</xf:label>
                                            <xf:value>V</xf:value>
                                        </xf:item>
                                        <xf:item>
                                            <xf:label>Participle</xf:label>
                                            <xf:value>Part</xf:value>
                                        </xf:item>
                                        <xf:item>
                                            <xf:label>Agt Noun</xf:label>
                                            <xf:value>AgtN</xf:value>
                                        </xf:item>
                                        <xf:item>
                                            <xf:label>Act Noun</xf:label>
                                            <xf:value>ActN</xf:value>
                                        </xf:item>
                                        <xf:item>
                                            <xf:label>Noun</xf:label>
                                            <xf:value>N</xf:value>
                                        </xf:item>
                                        <xf:item>
                                            <xf:label>Adj</xf:label>
                                            <xf:value>Adj</xf:value>
                                        </xf:item>
                                        <xf:item>
                                            <xf:label>Pronoun</xf:label>
                                            <xf:value>Pro</xf:value>
                                        </xf:item>
                                        <xf:item>
                                            <xf:label>Adv</xf:label>
                                            <xf:value>Adv</xf:value>
                                        </xf:item>
                                    </xf:select>
                                </div>
                                <div class="col-xs-6">
                                    <xf:select ref="TEI:m[@type = 'radical' and @n = 2]/@function" appearance="full" incremental="true">
                                        <xf:label/>
                                        <xf:item>
                                            <xf:label>Verb</xf:label>
                                            <xf:value>V</xf:value>
                                        </xf:item>
                                        <xf:item>
                                            <xf:label>Participle</xf:label>
                                            <xf:value>Part</xf:value>
                                        </xf:item>
                                        <xf:item>
                                            <xf:label>Agt Noun</xf:label>
                                            <xf:value>AgtN</xf:value>
                                        </xf:item>
                                        <xf:item>
                                            <xf:label>Act Noun</xf:label>
                                            <xf:value>ActN</xf:value>
                                        </xf:item>
                                        <xf:item>
                                            <xf:label>Noun</xf:label>
                                            <xf:value>N</xf:value>
                                        </xf:item>
                                        <xf:item>
                                            <xf:label>Adj</xf:label>
                                            <xf:value>Adj</xf:value>
                                        </xf:item>
                                        <xf:item>
                                            <xf:label>Pronoun</xf:label>
                                            <xf:value>Pro</xf:value>
                                        </xf:item>
                                        <xf:item>
                                            <xf:label>Adv</xf:label>
                                            <xf:value>Adv</xf:value>
                                        </xf:item>
                                    </xf:select>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-xs-2">
                                    <div class="input-group">
                                        <xf:select class="input-group -form-control" ref="TEI:m[@type = 'radical' and @n = 1]/@subtype" appearance="full">
                                            <xf:label class="input-group-addon">head.</xf:label>
                                            <xf:itemset nodeset="instance('i-headedness')//option">
                                                <xf:label ref="."/>
                                                <xf:value ref="@xml:id"/>
                                            </xf:itemset>
                                        </xf:select>
                                    </div>
                                </div>
                                <div class="col-xs-1">
                                    <xf:select class="input-group -form-control" ref="TEI:m[@type = 'radical' and @n = 1]/@ana" appearance="full" incremental="true">
                                        <xf:item>
                                            <xf:label>Abbr</xf:label>
                                            <xf:value>AbbrC</xf:value>
                                        </xf:item>
                                    </xf:select>
                                </div>
                                <div class="col-xs-1">
                                    <xf:select class="input-group -form-control" ref="TEI:m[@type = 'radical' and @n = 1]/@cert" appearance="full" incremental="true">
                                        <xf:item>
                                            <xf:label>*</xf:label>
                                            <xf:value>unattested</xf:value>
                                        </xf:item>
                                    </xf:select>
                                </div>
                                <div class="col-xs-2">
                                    <div class="input-group">
                                        <xf:input class="input-group -form-control" ref="TEI:m[@type = 'radical' and @n = 1]/@corresp">
                                            <xf:label class="input-group-addon">
                                                <span class="glyphicon glyphicon-tag"/>
                                            </xf:label>
                                            <xf:hint>linked compound</xf:hint>
                                        </xf:input>
                                    </div>
                                </div>
                                <div class="col-xs-2">
                                    <div class="input-group">
                                        <xf:select class="input-group -form-control" ref="TEI:m[@type = 'radical' and @n = 2]/@subtype" appearance="full">
                                            <xf:label class="input-group-addon">head.</xf:label>
                                            <xf:itemset nodeset="instance('i-headedness')//option">
                                                <xf:label ref="."/>
                                                <xf:value ref="@xml:id"/>
                                            </xf:itemset>
                                        </xf:select>
                                    </div>
                                </div>
                                <div class="col-xs-1">
                                    <xf:select class="input-group -form-control" ref="TEI:m[@type = 'radical' and @n = 2]/@ana" appearance="full" incremental="true">
                                        <xf:item>
                                            <xf:label>Abbr</xf:label>
                                            <xf:value>AbbrC</xf:value>
                                        </xf:item>
                                    </xf:select>
                                </div>
                                <div class="col-xs-1">
                                    <xf:select class="input-group -form-control" ref="TEI:m[@type = 'radical' and @n = 2]/@cert" appearance="full" incremental="true">
                                        <xf:item>
                                            <xf:label>*</xf:label>
                                            <xf:value>unattested</xf:value>
                                        </xf:item>
                                    </xf:select>
                                </div>
                                <div class="col-xs-2">
                                    <div class="input-group">
                                        <xf:input class="input-group -form-control" ref="TEI:m[@type = 'radical' and @n = 2]/@corresp">
                                            <xf:label class="input-group-addon">
                                                <span class="glyphicon glyphicon-tag"/>
                                            </xf:label>
                                            <xf:hint>linked compound</xf:hint>
                                        </xf:input>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-xs-6">
                                    <span class="semantic_tags"><!--
                                        <span style="display:none">
                                            <xf:input ref="TEI:m[@type != 'suffix' and @n = 1]/@ana" incremental="true">
                                                <xf:label>hidden control!!</xf:label>
                                                <xf:action ev:event="callback">
                                                    <xf:setvalue ref="." value="event('semantics')"/>
                                                </xf:action>
                                            </xf:input>
                                        </span>
                                        -->
                                        <div class="input-group">
                                            <span class="input-group-addon">
                                                <span class="glyphicon glyphicon-tasks"/>
                                                meanings
                                            </span><!--<input class="tags" value="" disabled="disabled"/>-->
                                            <span class="meanings-val">
                                                <xf:repeat nodeset="instance('i-meanings')/meaning[@grp=count(current()/preceding::TEI:gramGrp[@type='segmentation'])+1 and @n=1]//TEI:category" id="r-meanings-1">
                                                    <xf:output ref="TEI:catDesc[@xml:lang='en']"/>
                                                </xf:repeat>
                                            </span>
                                        </div>
                                    </span>
                                </div>
                                <div class="col-xs-6">
                                    <span class="semantic_tags"><!--
                                        <span style="display:none">
                                            <xf:input id="sem-ont-3" ref="TEI:m[@type != 'suffix' and @n = 2]/@ana">
                                                <xf:label>hidden controll</xf:label>
                                                <xf:action ev:event="callback">
                                                    <xf:setvalue ref="." value="event('semantics')"/>
                                                </xf:action>
                                            </xf:input>
                                        </span>
                                        -->
                                        <div class="input-group">
                                            <span class="input-group-addon">
                                                <span class="glyphicon glyphicon-tasks"/>
                                                meanings
                                            </span><!--<input class="tags" value="" disabled="disabled"/>-->
                                            <span class="meanings-val">
                                                <xf:repeat nodeset="instance('i-meanings')/meaning[@grp=count(current()/preceding::TEI:gramGrp[@type='segmentation'])+1 and @n=2]//TEI:category" id="r-meanings-2">
                                                    <xf:output ref="TEI:catDesc[@xml:lang='en']"/>
                                                </xf:repeat>
                                            </span>
                                        </div>
                                    </span>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-xs-3">
                                    <xf:select1 class="input-group -form-control" ref="TEI:m[@type = 'suffix' and @n = '4']">
                                        <xf:label class="input-group-addon">suffix 4</xf:label>
                                        <xf:itemset nodeset="instance('i-suffix-4')/option">
                                            <xf:label ref="."/>
                                            <xf:value ref="."/>
                                        </xf:itemset>
                                    </xf:select1>
                                </div>
                                <div class="col-xs-3">
                                    <xf:select1 class="input-group -form-control" ref="TEI:m[@type = 'suffix' and @n = '3']">
                                        <xf:label class="input-group-addon">suffix 3</xf:label>
                                        <xf:itemset nodeset="instance('i-suffix-3')/option">
                                            <xf:label ref="."/>
                                            <xf:value ref="."/>
                                        </xf:itemset>
                                    </xf:select1>
                                </div>
                                <div class="col-xs-3">
                                    <xf:select1 class="input-group -form-control" ref="TEI:m[@type = 'suffix' and @n = '2']">
                                        <xf:label class="input-group-addon">suffix 2</xf:label>
                                        <xf:itemset nodeset="instance('i-suffix-2')/option">
                                            <xf:label ref="."/>
                                            <xf:value ref="."/>
                                        </xf:itemset>
                                    </xf:select1>
                                </div>
                                <div class="col-xs-3">
                                    <xf:select1 class="input-group -form-control" ref="TEI:m[@type = 'suffix' and @n = '1']">
                                        <xf:label class="input-group-addon">suffix 1</xf:label>
                                        <xf:itemset nodeset="instance('i-suffix-1')/option">
                                            <xf:label ref="."/>
                                            <xf:value ref="."/>
                                        </xf:itemset>
                                    </xf:select1>
                                </div>
                            </div>
                            <!-- Bibliography -->
                            <div class="row">
                                <xf:label>
                                    <h3>Lexical connections</h3>
                                </xf:label>
                            </div>
                            <xf:group>
                                <div class="row">
                                    <div class="col-xs-11">
                                        <xf:label>
                                            <h4>Lexical or lexicographic significant sources</h4>
                                        </xf:label>
                                    </div>
                                    <div class="col-xs-1">
                                        <xf:trigger class="-btn -btn-default -glyphicon -glyphicon-plus">
                                            <xf:label/>
                                            <xf:insert context="TEI:listBibl" nodeset="TEI:cit" origin="instance('i-template')//TEI:cit[@type='source']"/>
                                        </xf:trigger>
                                    </div>
                                </div>
                                <xf:repeat ref="TEI:listBibl/TEI:cit[@type='source']" id="r-cit-source">
                                    <xf:label/>
                                    <div class="row">
                                        <div class="col-xs-12">
                                            <xf:input class="input-group -form-control" ref="TEI:quote">
                                                <xf:label class="input-group-addon">quote</xf:label>
                                            </xf:input>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-xs-3">
                                            <xf:input class="input-group -form-control" ref="TEI:ref">
                                                <xf:label class="input-group-addon">reference</xf:label>
                                            </xf:input>
                                        </div>
                                        <div class="col-xs-3">
                                            <xf:input class="input-group -form-control" ref="TEI:bibl/TEI:author">
                                                <xf:label class="input-group-addon">author</xf:label>
                                            </xf:input>
                                        </div>
                                        <div class="col-xs-2">
                                            <xf:input class="input-group -form-control" ref="TEI:span">
                                                <xf:label class="input-group-addon">details</xf:label>
                                            </xf:input>
                                        </div>
                                        <div class="col-xs-3">
                                            <xf:input class="input-group -form-control" ref="TEI:ref/@target">
                                                <xf:label class="input-group-addon">link</xf:label>
                                            </xf:input>
                                        </div>
                                        <div class="col-xs-1">
                                            <xf:trigger class="-btn -btn-default -glyphicon -glyphicon-trash">
                                                <xf:label/>
                                                <xf:delete nodeset="//TEI:gramGrp[@type='segmentation'][index('r-gramGrp')]/TEI:listBibl/TEI:cit[@type='source'][index('r-cit-source')]"/>
                                            </xf:trigger>
                                        </div>
                                    </div>
                                </xf:repeat>
                            </xf:group>
                            <xf:group>
                                <div class="row">
                                    <div class="col-xs-11">
                                        <xf:label>
                                            <h4>References in modern Lexicology and Linguistics</h4>
                                        </xf:label>
                                    </div>
                                    <div class="col-xs-1">
                                        <xf:trigger class="-btn -btn-default -glyphicon -glyphicon-plus">
                                            <xf:label/>
                                            <xf:insert context="TEI:listBibl" nodeset="TEI:cit" origin="instance('i-template')//TEI:cit[@type='auxiliary']"/>
                                        </xf:trigger>
                                    </div>
                                </div>
                                <xf:repeat ref="TEI:listBibl/TEI:cit[@type='auxiliary']" id="r-cit-auxiliary">
                                    <xf:label/>
                                    <div class="row">
                                        <div class="col-xs-12">
                                            <xf:input class="input-group -form-control" ref="TEI:quote">
                                                <xf:label class="input-group-addon">quote</xf:label>
                                            </xf:input>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-xs-3">
                                            <xf:input class="input-group -form-control" ref="TEI:ref">
                                                <xf:label class="input-group-addon">reference</xf:label>
                                            </xf:input>
                                        </div>
                                        <div class="col-xs-3">
                                            <xf:input class="input-group -form-control" ref="TEI:bibl/TEI:author">
                                                <xf:label class="input-group-addon">author</xf:label>
                                            </xf:input>
                                        </div>
                                        <div class="col-xs-2">
                                            <xf:input class="input-group -form-control" ref="TEI:span">
                                                <xf:label class="input-group-addon">details</xf:label>
                                            </xf:input>
                                        </div>
                                        <div class="col-xs-3">
                                            <xf:input class="input-group -form-control" ref="TEI:ref/@target">
                                                <xf:label class="input-group-addon">link</xf:label>
                                            </xf:input>
                                        </div>
                                        <div class="col-xs-1">
                                            <xf:trigger class="-btn -btn-default -glyphicon -glyphicon-trash">
                                                <xf:label/>
                                                <xf:delete nodeset="//TEI:gramGrp[@type='segmentation'][index('r-gramGrp')]/TEI:listBibl/TEI:cit[@type='auxiliary'][index('r-cit-auxiliary')]"/>
                                            </xf:trigger>
                                        </div>
                                    </div>
                                </xf:repeat>
                            </xf:group>
        
                            <div class="row">
                                <xf:label>
                                    <h3>Onomastics</h3>
                                </xf:label>
                            </div>
                            <xf:group>
                                <div class="row">
                                    <div class="col-xs-11">
                                        <xf:label>
                                            <h4>Linked sources</h4>
                                        </xf:label>
                                    </div>
                                    <div class="col-xs-1">
                                        <xf:trigger class="-btn -btn-default -glyphicon -glyphicon-plus">
                                            <xf:label/>
                                            <xf:insert context="TEI:listBibl" nodeset="TEI:cit" origin="instance('i-template')//TEI:cit[@type='linguistic']"/>
                                        </xf:trigger>
                                    </div>
                                </div>
                                <xf:repeat ref="TEI:listBibl/TEI:cit[@type='linguistic']" id="r-cit-linguistic">
                                    <xf:label/>
                                    <div class="row">
                                        <div class="col-xs-12">
                                            <xf:input class="input-group -form-control" ref="TEI:quote">
                                                <xf:label class="input-group-addon">quote</xf:label>
                                            </xf:input>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-xs-3">
                                            <xf:input class="input-group -form-control" ref="TEI:ref">
                                                <xf:label class="input-group-addon">reference</xf:label>
                                            </xf:input>
                                        </div>
                                        <div class="col-xs-3">
                                            <xf:input class="input-group -form-control" ref="TEI:bibl/TEI:author">
                                                <xf:label class="input-group-addon">author</xf:label>
                                            </xf:input>
                                        </div>
                                        <div class="col-xs-2">
                                            <xf:input class="input-group -form-control" ref="TEI:span">
                                                <xf:label class="input-group-addon">details</xf:label>
                                            </xf:input>
                                        </div>
                                        <div class="col-xs-3">
                                            <xf:input class="input-group -form-control" ref="TEI:ref/@target">
                                                <xf:label class="input-group-addon">link</xf:label>
                                            </xf:input>
                                        </div>
                                        <div class="col-xs-1">
                                            <xf:trigger class="-btn -btn-default -glyphicon -glyphicon-trash">
                                                <xf:label/>
                                                <xf:delete nodeset="//TEI:gramGrp[@type='segmentation'][index('r-gramGrp')]/TEI:listBibl/TEI:cit[@type='linguistic'][index('r-cit-linguistic')]"/>
                                            </xf:trigger>
                                        </div>
                                    </div>
                                </xf:repeat>
                            </xf:group>
                            <xf:group>
                                <div class="row">
                                    <div class="col-xs-11">
                                        <xf:label>
                                            <h4>Modern references</h4>
                                        </xf:label>
                                    </div>
                                    <div class="col-xs-1">
                                        <xf:trigger class="-btn -btn-default -glyphicon -glyphicon-plus">
                                            <xf:label/>
                                            <xf:insert context="TEI:listBibl" nodeset="TEI:cit" origin="instance('i-template')//TEI:cit[@type='modern']"/>
                                        </xf:trigger>
                                    </div>
                                </div>
                                <xf:repeat ref="TEI:listBibl/TEI:cit[@type='modern']" id="r-cit-modern">
                                    <xf:label/>
                                    <!--
                                    hiding but will leave the model for this kind of reference same as others
                                    <div class="row">
                                        <div class="col-xs-12">
                                            <xf:input class="input-group -form-control" ref="TEI:quote">
                                                <xf:label class="input-group-addon">quote</xf:label>
                                            </xf:input>
                                        </div>
                                    </div>
                                    -->
                                    <div class="row">
                                        <div class="col-xs-3">
                                            <xf:input class="input-group -form-control" ref="TEI:ref">
                                                <xf:label class="input-group-addon">reference</xf:label>
                                            </xf:input>
                                        </div>
                                        <div class="col-xs-3">
                                            <xf:input class="input-group -form-control" ref="TEI:bibl/TEI:author">
                                                <xf:label class="input-group-addon">author</xf:label>
                                            </xf:input>
                                        </div>
                                        <div class="col-xs-2">
                                            <xf:input class="input-group -form-control" ref="TEI:span">
                                                <xf:label class="input-group-addon">details</xf:label>
                                            </xf:input>
                                        </div>
                                        <div class="col-xs-3">
                                            <xf:input class="input-group -form-control" ref="TEI:ref/@target">
                                                <xf:label class="input-group-addon">link</xf:label>
                                            </xf:input>
                                        </div>
                                        <div class="col-xs-1">
                                            <xf:trigger class="-btn -btn-default -glyphicon -glyphicon-trash">
                                                <xf:label/>
                                                <xf:delete nodeset="//TEI:gramGrp[@type='segmentation'][index('r-gramGrp')]/TEI:listBibl/TEI:cit[@type='modern'][index('r-cit-modern')]"/>
                                            </xf:trigger>
                                        </div>
                                    </div>
                                </xf:repeat>
                            </xf:group>
                            <!--- /Bibliography -->
                            
                            <!-- delete segmentation -->
                            <div class="row">
                                <div class="col-xs-2">Delete hypothesis
                                    <xf:trigger class="-btn -btn-default -glyphicon -glyphicon-trash">
                                        <xf:label/>
                                        <xf:delete nodeset="//TEI:gramGrp[@type='segmentation'][index('r-gramGrp')]"/>
                                        <script>
                                             clearAndInitSemantics();  
                                        </script>
                                    </xf:trigger>
                                </div>
                            </div>
                        </xf:group>
                    </xf:repeat>
                </xf:group>
            </xf:group>
            <br/>
            <xf:submit class="-btn -btn-success -glyphicon -glyphicon-save" submission="s-save-data">
                <xf:label>Save</xf:label>
            </xf:submit>
            <a href="index.html" class="btn btn-default glyphicon glyphicon-out">Return to the list of names without saving</a>
        </main>

        <bfc:dialog id="meanings" src="meanings.html">
            <xf:label>Add meaning</xf:label>
            <div id="mountpoint"/>
        </bfc:dialog>
        <div id="confirmDelete" class="modal fade" tabindex="-1" style="display: none;">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                        <h4 class="modal-title">Confirm delete</h4>
                    </div>
                    <form class="form form-horizontal" action="index.html?delete=aa" method="POST">
                        <div class="modal-body">
                            <div class="form-group">
                                <label class="control-label col-sm-10">you sure want to delete <xf:label ref="bf:appContext('id')"/>?</label>
                            </div>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-primary" data-dismiss="modal" aria-hidden="true">Cancel</button>
                            <button type="submit" class="btn btn-danger">Delete</button>
                        </div>
                    </form>
                </div>
            </div>
        </div><!-- Modal Dialog -->
        <script type="text/javascript" src="resources/js/vendor/jquery.min.js"/>
        <script type="text/javascript" src="$shared/resources/scripts/loadsource.js"/>
        <script type="text/javascript" src="resources/js/vendor/bootstrap.min.js"/>
        <script src="$shared/resources/scripts/jquery/jquery-ui.min.js" type="text/javascript" charset="utf-8"/>
        <script type="text/javascript" src="resources/js/editor.js"/>
        <script type="text/javascript" src="resources/js/vendor/select2/select2.js"/>
        <script type="text/javascript" src="resources/js/select2/select2.js"/>
    </body>
</html>
