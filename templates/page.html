<html xmlns="http://www.w3.org/1999/xhtml" xmlns:i18n="http://exist-db.org/xquery/i18n">
<head>
    <title data-template="app:title">App Title</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <meta data-template="config:app-meta"/>
    <link rel="shortcut icon" href="$shared/resources/images/exist_icon_16x16.ico"/>
    <link rel="stylesheet" type="text/css" href="//cdn.datatables.net/1.10.10/css/jquery.dataTables.min.css"/>
    <link rel="stylesheet" type="text/css" href="resources/css/style.css"/>
    <script type="text/javascript" src="resources/js/vendor/jquery/dist/jquery.min.js"/>
    <script type="text/javascript" src="$shared/resources/scripts/loadsource.js"/>
    <script type="text/javascript" src="resources/js/vendor/bootstrap/dist/js/bootstrap.min.js"/>
    <script type="text/javascript" charset="utf8" src="//cdn.datatables.net/1.10.10/js/jquery.dataTables.js"/>
    <style type="text/css">
        fieldset {
            border: 1px solid #eee;
            padding: 0 1.4em 1.4em 1.4em;
            -webkit-box-shadow:  0px 0px 0px 0px #000;
            box-shadow:  0px 0px 0px 0px #000;
        }

        legend {
            width:inherit; /* Or auto */
            padding:0 10px;
            border-bottom:none;
        }

        .primary {
            text-align: center;
            font-weight: normal;
        }

        .secondary th {border-bottom: 2px solid #ddd !important; font-weight: normal !important;}

        .letter {
            margin:left: 2px;
            margin-right: 10px;
        }

        .letter a {
            font-weight: bold;
        }

        .search-section{
            margin:20px 0;
        }
    </style>
    <script type="text/javascript" data-template="app:column-order">
        var firstSort=17;
        var secondSort=1;
    </script>
    <script type="text/javascript" class="init">

        $(document).ready(function() {
            $('#datatable').DataTable( {
                "columnDefs": [
                    { "orderable": false, "targets": [1, 2] }
                ],
                "lengthMenu": [ [50, 100, 500, -1], [50, 100, 500, "All"] ],
                "order": [[ firstSort, "desc" ],[ secondSort, "asc" ]],
                "paging":   true,
                "ordering": true,
                "info":     true
            } );


            var table =$('#servertable').DataTable( {
                "columnDefs": [
                    { "orderable": false, "targets": [1, 2]}

                ] ,
                "processing": true,
                "serverSide": true,
                "ajax": "modules/load-names.xqm",
                "lengthMenu": [ [50, 100, 500, -1], [50, 100, 500, "All"] ],
                "order": [[ firstSort, "desc" ],[ 1, "asc" ]],
                "ordering": true,
                "paging":   true,
                "info":     true,

                "initComplete": function(settings, json) {
                    //change the default search input behaviour, not sending all requests but only after hitting enter (or empty string)
                    $("#servertable_filter input")
                    .unbind()
                    .bind("keyup change", function(e) {
                        if (e.keyCode == 13 || this.value == "") {
                            table
                            .search(this.value)
                            .draw();
                        }
                    });

                }

            } );
        } );


    </script>
</head>
<body id="body" data-template="app:lang">
<div class="i18n:translate?lang=fr&amp;catalogues=data/i18n">
    <nav class="navbar navbar-default" role="navigation">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar-collapse-1">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"/>
                <span class="icon-bar"/>
                <span class="icon-bar"/>
            </button>
            <a data-template="app:title" class="navbar-brand" href="./about.html">App Title</a>
        </div>
        <div class="navbar-collapse collapse" id="navbar-collapse-1">
            <ul class="nav navbar-nav">
                <li data-template="app:show-if-logged-in">
                <li class="dropdown" id="about">
                    <a href="index.html">
                        <span class="glyphicon glyphicon-search"/>
                        <i18n:text key="search">Search</i18n:text>
                    </a>
                    <ul class="dropdown-menu">
                        <li>
                            <a href="index.html">
                                <i18n:text key="search">Search</i18n:text>
                            </a>
                        </li>
                    </ul>
                </li>
                <li class="dropdown" id="about">
                    <a href="indexold.html">
                        <span class="glyphicon glyphicon-search"/>
                        <i18n:text key="search-alt">all</i18n:text>
                    </a>
                    <ul class="dropdown-menu">
                        <li>
                            <a href="indexold.html">
                                <i18n:text key="search-alt">all</i18n:text>
                            </a>
                        </li>
                    </ul>
                </li>
                <li class="dropdown" id="entry">
                    <a href="editor.xhtml">
                        <span class="glyphicon glyphicon-edit"/>
                        <i18n:text key="newEntry">New entry</i18n:text>
                    </a>
                </li>
                <li class="dropdown" id="morphemes">
                    <a href="morphemes.html">
                        <span class="glyphicon glyphicon-list"/>
                        <i18n:text key="morphemes">Lexemes</i18n:text>
                    </a>
                </li>
                <li class="dropdown" id="meanings">
                    <a href="meanings.html">
                        <span class="glyphicon glyphicon-list"/>
                        <i18n:text key="meanings">Meanings</i18n:text>
                    </a>
                </li>
                </li><!--
                        <li class="dropdown" id="names">
                            <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                                <span class="glyphicon glyphicon-inbox"/>
                                <i18n:text key="nameCatalogue">Name catalogue</i18n:text>
                            </a>
                            <ul data-template="app:generate-dropdown-menu" data-template-list="ΑΒΓϜΔΕΖΗΘΙΚΛΜΝΞΟΠΡΣΤΥΦΧΨΩ" data-template-link="index" class="dropdown-menu"/>
                        </li>
-->
                <li class="dropdown" id="about">
                    <a href="about.html">
                        <span class="glyphicon glyphicon-home"/>
                        <i18n:text key="about">About</i18n:text>
                    </a>
                </li><!-- flag icons http://www.freeiconsweb.net/Other-Vector/fllag-iconslanguage-flag.html License : Creative Commons Attribution 3.0 License -->
                <li id="fr">
                    <a href="?lang=fr">
                        <img src="resources/img/fr.png" style="width: 30px; margin-top: -4px;" title="fr"/>
                    </a>
                </li>
                <li id="en">
                    <a href="?lang=en">
                        <img src="resources/img/en.png" style="width: 30px; margin-top: -4px;" title="en"/>
                    </a>
                </li>
            </ul>
            <ul class="nav navbar-nav navbar-right">
                <li data-template="app:check-login">
                    <a href="#loginDialog" data-toggle="modal">
                        <span class="glyphicon glyphicon-user"/> Login</a>
                    <a href="?logout=true">
                        <span class="glyphicon glyphicon-user"/> Logout <span class="app:current-user"/>
                    </a>
                </li>
            </ul>
        </div><!-- https://pixabay.com/en/athens-greece-acropolis-ruins-315838/ CC0 -->
        <div style="background-image: url('resources/img/acropolis.jpg'); height: 100px;"/>
    </nav>
    <div id="content" class="container"/>
    <footer class="tp-row">
        <a class="poweredby" href="http://exist-db.org">
            <img src="$shared/resources/images/powered-by.svg" alt="Powered by eXist-db"/>
        </a>
    </footer>
</div>
<div id="loginDialog" class="modal fade" tabindex="-1" style="display: none;">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                <h4 class="modal-title">Login</h4>
            </div>
            <form class="form form-horizontal" action="" method="POST">
                <div class="modal-body">
                    <div class="form-group">
                        <label class="control-label col-sm-2">User:</label>
                        <div class="col-sm-10">
                            <input type="text" name="user" class="form-control"/>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="control-label col-sm-2">Password:</label>
                        <div class="col-sm-10">
                            <input type="password" name="password" class="form-control"/>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="submit" class="btn btn-primary">Login</button>
                </div>
                <input type="hidden" name="duration" value="P7D"/>
            </form>
        </div>
    </div>
</div><!-- Modal Dialog -->
<div class="modal fade" id="confirmDelete" role="dialog" aria-labelledby="confirmDeleteLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                <h4 class="modal-title">Delete Parmanently</h4>
            </div>
            <div class="modal-body">
                <p>Are you sure about this ? Dya no whadya doin'</p>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
                <button type="button" class="btn btn-danger" id="confirm">Delete</button>
            </div>
        </div>
    </div>
</div><!-- Confirm delete dialog event handler -->
<script type="text/javascript">
    $('#confirmDelete').on('show.bs.modal', function (e) {
        $message = $(e.relatedTarget).attr('data-message');
        $(this).find('.modal-body p').text($message);
        $title = $(e.relatedTarget).attr('data-title');
        $(this).find('.modal-title').text($title);

        // Pass form reference to modal for submission on yes/ok
        var form = $(e.relatedTarget).closest('form');
        $(this).find('.modal-footer #confirm').data('form', form);
    });

    <!-- Form confirm (yes/ok) handler, submits form -->
    $('#confirmDelete').find('.modal-footer #confirm').on('click', function(){
        $(this).data('form').submit();
    });
</script>
</body>
</html>